# 图表主题配置指南

## 功能概述

图表主题配置允许你为整个大屏设置统一的图表配色方案，支持预设主题和自定义颜色两种模式。

## 使用方法

### 1. 访问主题配置

1. 在编辑器中，点击画布空白区域（取消选中所有组件）
2. 右侧属性面板会显示"页面配置"
3. 展开"图表主题"折叠面板

### 2. 选择预设主题

系统提供了 13 种精心设计的预设主题：

- **未命名** - ECharts 默认主题
- **明亮** - 明亮清新的配色方案
- **暗波** - 适合深色背景的配色
- **马卡龙** - 柔和的马卡龙色系
- **蓝绿** - 蓝绿色调主题
- **深紫** - 优雅的紫色系
- **复古** - 复古怀旧风格
- **粉青** - 粉色与青色的搭配
- **灰粉** - 灰色与粉色的组合
- **青草** - 清新的青草色
- **橘红** - 温暖的橘红色系
- **深色** - 深沉稳重的配色
- **罗马红** - 罗马风格的红色主题

**操作步骤：**
1. 选择"预设主题"单选按钮
2. 点击任意主题卡片即可应用
3. 每个主题卡片显示主题名称和前 6 个颜色预览

### 3. 自定义颜色

如果预设主题不满足需求，可以自定义颜色数组：

**操作步骤：**
1. 选择"自定义颜色"单选按钮
2. 点击颜色选择器修改现有颜色
3. 点击"添加颜色"按钮增加新颜色
4. 点击删除按钮移除不需要的颜色（至少保留 1 个）

**建议：**
- 建议至少配置 6-9 种颜色
- 颜色应有足够的对比度和区分度
- 考虑色盲友好的配色方案

## 主题应用范围

配置的主题会自动应用到以下图表类型：

- 折线图（单线/双线）
- 柱状图（单柱/双柱/横向）
- 饼图（标准/半圆）
- 散点图
- 雷达图
- 漏斗图
- 词云图
- 地图
- 日历热力图
- 树形图
- 桑基图

## 技术实现

### 配置存储

主题配置存储在 `canvasConfig.chartTheme` 中：

```typescript
{
  type: 'preset' | 'custom',  // 主题类型
  presetName?: string,         // 预设主题名称
  customColors?: string[]      // 自定义颜色数组
}
```

### 获取主题颜色

在图表配置中使用 `getCurrentThemeColors()` 函数获取当前主题颜色：

```typescript
import { getCurrentThemeColors } from '@/pages/edit/config/chartThemes'

const colors = getCurrentThemeColors(state.canvasConfig)
// 在 ECharts option 中使用
option.color = colors
```

## 最佳实践

1. **统一风格**：为整个大屏选择一个主题，保持视觉一致性
2. **背景适配**：深色背景选择"暗波"等深色主题，浅色背景选择"明亮"等主题
3. **品牌色**：使用自定义颜色配置企业品牌色
4. **测试验证**：配置后检查所有图表的显示效果
5. **保存备份**：重要配置记得导出保存

## 注意事项

- 主题配置会影响所有新添加的图表
- 已存在的图表可能需要刷新才能应用新主题
- 某些图表可能有自己的颜色配置，会覆盖主题颜色
- 自定义颜色数组为空时会自动使用默认主题
